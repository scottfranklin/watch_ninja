
builddir = bin
cc = gcc
cflags = -std=gnu99 -Werror
ldflags = -Werror

rule cc
    command = $cc $cflags -c $in -o $out
    description = CC $out

rule link
    command = $cc $ldflags -o $out $in
    description = LINK $out

build $builddir/watch_ninja.o: cc watch_ninja.c
build $builddir/watch_ninja: link $builddir/watch_ninja.o
build watch_ninja: phony $builddir/watch_ninja
